# 智能助手

一个基于 MCP 和大语言模型的**智能工具调用分诊代理系统**

## 一、项目核心功能

- 通过语义理解将用户的自然语言请求分发到对应的专业子代理，自动调用自定义工具（新闻、天气、名言查询等）完成任务
- 若无匹配工具，则由大模型直接生成回答，兼顾工具调用的精准性和回答的灵活性

## 二、核心特性

- 主代理基于语义理解，将请求分发到新闻、通用工具、名言等专业子代理；
- 基于 SSE 实现工具调用和回答的流式返回，提升交互体验；
- 不同类型工具通过独立 MCP 客户端管理，避免工具调用冲突；
- 无匹配工具时自动放弃调用，由大模型直接生成回答，保证响应完整性。

## 三、项目启动步骤

### 1. 启动 MCP 后端服务

```python
python mcp_server_main.py
```

启动成功后会显示：

```python
SSE server running on http://0.0.0.0:8900/sse
```

保持这个终端运行，不要关闭

### 2. 启动前端 Streamlit 页面

打开新的终端（保持后端服务运行，不要关闭），进入项目根目录，激活虚拟环境（若已创建），执行以下命令启动前端：

```
streamlit run streamlit_demo.py
```

- 启动成功后，会自动打开浏览器，进入系统前端主页
- 若未自动打开，可手动访问 `http://localhost:8501`

## 四、核心组件

|    组件    |                             作用                             |
| :--------: | :----------------------------------------------------------: |
| 主分诊代理 |          核心路由，根据用户请求语义分发到对应子代理          |
|   子代理   |     专业代理，绑定对应 MCP 客户端，负责调用特定类型工具      |
| MCP 客户端 |    基于 SSE 协议连接 MCP 服务器，管理工具可见性和调用逻辑    |
| 流式运行器 | 运行代理并返回流式事件，支持工具调用结果、文本回答的实时推送 |

## 五、核心功能使用指南

本项目基于**分诊代理 + 工具调用**架构，支持自动识别用户意图并调用对应工具（新闻、天气、名言），不需要手动指定工具类型。

目前支持以下三类问题，会自动路由到对应工具：

#### 1. 新闻查询

示例：

- 今天有什么新闻？
- 最近有什么热点？
- GitHub 今天热门项目有哪些？

#### 2. 名言 / 警句查询

示例：

- 给我一句励志名言
- 推荐一句关于坚持的名言

#### 3. 通用查询

包含天气查询、花语查询、汇率计算等

示例：

- 今天广州的天气怎么样？
- 玫瑰花的花语是什么？
- 今日人民币兑换港币的汇率是多少？
